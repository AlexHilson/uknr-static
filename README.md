# uknr-static
A project for building a static website using the contents of a Google Drive spreadsheet. The master branch contains the tools to actually build the static content, while the gh-pages branch contains only the static content.

## Dependencies
Vagrant installed locally - see https://www.vagrantup.com/docs/installation/

## Building static content

To simply update the content with the latest results:
* Initialise environment with `vagrant up`
* Ensure the correct spreadsheet is defined in solo-gh-pages/_config.yml
* Run `vagrant ssh --command /vagrant/build_uknr.sh`
* Follow the prompts - they're not exactly right but are close. For example you don't need to create a new project each time. This step is a bit clunky as you have to repeat the OAuth stuff with each build.

To view the generated content:
* Run `vagrant ssh --command /vagrant/serve_uknr.sh`
* Visit `0.0.0.0:4000`

If you want to make more involved changes, such as modifying the style, you may wish to `vagrant ssh` and run the standard Jekyll commands to serve and auto-regenerate the pages. This should mean you only have to authenticate once - see the contents of the build_uknr.sh file for the way to set up gdrive OAuth.

## Pushing static content

To push the static content generated by Jekyll onto the gh-pages branch:
* Commit and push your changes to the master branch
* Run `git subtree push --prefix uknr origin gh-pages`

## Further reading

Built with [Jekyll](https://jekyllrb.com), [Solo](http://chibicode.github.io/solo/), [jekyll-gdrive](https://github.com/netlify/jekyll-gdrive) and [git subtree](https://gist.github.com/cobyism/4730490).
